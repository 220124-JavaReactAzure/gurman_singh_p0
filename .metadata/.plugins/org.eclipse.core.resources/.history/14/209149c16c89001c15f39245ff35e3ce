package com.revature.course_reg;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;

import com.revature.models.Student;


public class CoReDriver {

	static BufferedReader consoleReader = new BufferedReader(new InputStreamReader(System.in));

	public static void main(String[] args) {
		boolean isRunning = true;

		while (isRunning) {
			System.out.println(	"Welcome to the Singh Course Registration console!\n" +
								"1. Login\n" +
								"2. Register\n" +
								"3. Exit\n" +
								"---- ");

			try {
				String input = consoleReader.readLine();
				
				switch (input) {
				case "1":
					System.out.println("Login selected");
					break;
				case "2":
					register();
					break;
				case "3":
					System.out.println("Exit selected");
					isRunning = false;
					break;
				default:
					System.out.println("Invalid selection. Please select one of the listed options.");
					break;
				}

			} catch (IOException e) {
				e.printStackTrace();
				isRunning = false;
			} // Can add finally block to send text every selection
		}

		try {
			consoleReader.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
	
	public static void register() throws IOException {
		System.out.println("The user selected register");
		
		System.out.println("Please provide information to register");
		System.out.print("First Name: ");
		String fname = consoleReader.readLine();
		
		System.out.print("Last Name: ");
		String lname = consoleReader.readLine();
		
		System.out.print("Email: ");
		String email = consoleReader.readLine();
		
		System.out.print("Username: ");
		String username = consoleReader.readLine();
		
		System.out.print("Password: ");
		String password = consoleReader.readLine();
		
		System.out.printf("Provided input- \n First Name: %s \n Last Name: %s \n Email: %s \n Username: %s \n Password: %s \n", fname, lname, email, username, password);
	
		Student student = new Student(fname, lname, email, username, password);
		
		File studentsPersistence = new File("src/resources/data.txt");
		
		//Try with resources
		try(FileWriter  fileWriter = new FileWriter(studentsPersistence, true); ){ // Include true to append the data
			fileWriter.write(student.toFileString() + "\n");
		} catch (IOException e ) {
			e.printStackTrace();
		}
		
		String[] studentArr = student.toFileString().split(":");
		
		student.printFromFile(studentArr);
	}
	
}
