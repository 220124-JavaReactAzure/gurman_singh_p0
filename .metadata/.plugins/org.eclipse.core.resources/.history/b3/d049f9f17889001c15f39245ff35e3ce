package com.revature.course_reg.menus;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

import com.revature.course_reg.models.Student;
import com.revature.course_reg.util.MenuRouter;

public class RegisterMenu extends Menu{
	
	StudentService studentService;


	public RegisterMenu(BufferedReader consoleReader, MenuRouter router) {
		super("Register", "/register", consoleReader, router);
		// TODO Auto-generated constructor stub
	}

	@Override
	public void render() throws Exception {
		// TODO Auto-generated method stub
		System.out.println("The user selected register");
		
		// Things to obtain from user: first name, last name, email, username, password
		
		System.out.println("Please provide information to register");
		System.out.print("First Name: ");
		String fname = consoleReader.readLine();
		
		System.out.print("Last Name: ");
		String lname = consoleReader.readLine();
		
		System.out.print("Email: ");
		String email = consoleReader.readLine();
		
		System.out.print("Username: ");
		String username = consoleReader.readLine();
		
		System.out.print("Password: ");
		String password = consoleReader.readLine();
		
//		System.out.printf("Provided input- \n First Name: %s \n Last Name: %s \n Email: %s \n Username: %s \n Password: %s \n", fname, lname, email, username, password);

		Student student = new Student(fname, lname, email, username, password);
		
		System.out.printf("Provided by user: %s\n", student.toString()).println();
		
		try {
			studentService.registerNewStudent(student);
		} catch (RuntimeException e ) {
			
		}
	}

}
		
		
//		File studentsPersistence = new File("src/resources/data.txt");
		
		
		//Try with resources
//		try(FileWriter  fileWriter = new FileWriter(studentsPersistence, true); ){ // Include true to append the data
//			fileWriter.write(student.toFileString() + "\n");
//		} catch (IOException e ) {
//			e.printStackTrace();
//		}
//		
//		String[] studentArr = student.toFileString().split(":");
//		
//		student.printFromFile(studentArr);

